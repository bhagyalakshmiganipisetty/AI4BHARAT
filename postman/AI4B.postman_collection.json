{
  "info": {
    "name": "AI4B Bug Tracker API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{base_url}}/api/auth/register",
            "body": {
              "mode": "raw",
              "raw": "{\"username\":\"alice\",\"email\":\"alice@example.com\",\"password\":\"Abc123!@\"}",
              "options": { "raw": { "language": "json" } }
            }
          },
          "response": []
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "  const data = pm.response.json();",
                  "  pm.environment.set(\"access_token\", data.access_token);",
                  "  pm.environment.set(\"refresh_token\", data.refresh_token);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{base_url}}/api/auth/login",
            "body": {
              "mode": "raw",
              "raw": "{\"username\":\"alice\",\"password\":\"Abc123!@\"}",
              "options": { "raw": { "language": "json" } }
            }
          },
          "response": []
        },
        {
          "name": "Me",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{access_token}}" }
            ],
            "url": "{{base_url}}/api/auth/me"
          },
          "response": []
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "  const data = pm.response.json();",
                  "  pm.environment.set(\"access_token\", data.access_token);",
                  "  pm.environment.set(\"refresh_token\", data.refresh_token);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{base_url}}/api/auth/refresh",
            "body": {
              "mode": "raw",
              "raw": "{\"refresh_token\":\"{{refresh_token}}\"}",
              "options": { "raw": { "language": "json" } }
            }
          },
          "response": []
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{base_url}}/api/auth/logout",
            "body": {
              "mode": "raw",
              "raw": "{\"refresh_token\":\"{{refresh_token}}\"}",
              "options": { "raw": { "language": "json" } }
            }
          },
          "response": []
        },
        {
          "name": "Logout All",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{access_token}}" }
            ],
            "url": "{{base_url}}/api/auth/logout-all"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Projects",
      "item": [
        {
          "name": "List Projects",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{access_token}}" }
            ],
            "url": "{{base_url}}/api/projects"
          },
          "response": []
        },
        {
          "name": "Create Project",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "  pm.environment.set(\"project_id\", pm.response.json().id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{access_token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{base_url}}/api/projects",
            "body": {
              "mode": "raw",
              "raw": "{\"name\":\"Demo\",\"description\":\"Demo project\"}",
              "options": { "raw": { "language": "json" } }
            }
          },
          "response": []
        },
        {
          "name": "Get Project",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{access_token}}" }
            ],
            "url": "{{base_url}}/api/projects/{{project_id}}"
          },
          "response": []
        },
        {
          "name": "Update Project",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Authorization", "value": "Bearer {{access_token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{base_url}}/api/projects/{{project_id}}",
            "body": {
              "mode": "raw",
              "raw": "{\"description\":\"Updated description\"}",
              "options": { "raw": { "language": "json" } }
            }
          },
          "response": []
        },
        {
          "name": "Archive Project",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{access_token}}" }
            ],
            "url": "{{base_url}}/api/projects/{{project_id}}"
          },
          "response": []
        },
        {
          "name": "List Project Issues",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{access_token}}" }
            ],
            "url": "{{base_url}}/api/projects/{{project_id}}/issues"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Issues",
      "item": [
        {
          "name": "Create Issue (Project)",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "  pm.environment.set(\"issue_id\", pm.response.json().id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{access_token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{base_url}}/api/projects/{{project_id}}/issues",
            "body": {
              "mode": "raw",
              "raw": "{\"title\":\"Bug 1\",\"description\":\"Steps to reproduce...\",\"priority\":\"high\"}",
              "options": { "raw": { "language": "json" } }
            }
          },
          "response": []
        },
        {
          "name": "Create Issue (Global)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{access_token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{base_url}}/api/issues",
            "body": {
              "mode": "raw",
              "raw": "{\"project\":\"{{project_id}}\",\"title\":\"Bug 2\",\"description\":\"Details...\",\"priority\":\"medium\",\"assignee\":null}",
              "options": { "raw": { "language": "json" } }
            }
          },
          "response": []
        },
        {
          "name": "List Issues",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{access_token}}" }
            ],
            "url": "{{base_url}}/api/issues"
          },
          "response": []
        },
        {
          "name": "Get Issue",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{access_token}}" }
            ],
            "url": "{{base_url}}/api/issues/{{issue_id}}"
          },
          "response": []
        },
        {
          "name": "Update Issue Status",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Authorization", "value": "Bearer {{access_token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{base_url}}/api/issues/{{issue_id}}",
            "body": {
              "mode": "raw",
              "raw": "{\"status\":\"in_progress\"}",
              "options": { "raw": { "language": "json" } }
            }
          },
          "response": []
        },
        {
          "name": "Assign Issue",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Authorization", "value": "Bearer {{access_token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{base_url}}/api/issues/{{issue_id}}",
            "body": {
              "mode": "raw",
              "raw": "{\"assignee\":\"{{assignee_id}}\"}",
              "options": { "raw": { "language": "json" } }
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Comments",
      "item": [
        {
          "name": "List Issue Comments",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{access_token}}" }
            ],
            "url": "{{base_url}}/api/issues/{{issue_id}}/comments"
          },
          "response": []
        },
        {
          "name": "Add Comment",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "  pm.environment.set(\"comment_id\", pm.response.json().id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{access_token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{base_url}}/api/issues/{{issue_id}}/comments",
            "body": {
              "mode": "raw",
              "raw": "{\"content\":\"Investigated root cause.\"}",
              "options": { "raw": { "language": "json" } }
            }
          },
          "response": []
        },
        {
          "name": "Edit Comment",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Authorization", "value": "Bearer {{access_token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{base_url}}/api/comments/{{comment_id}}",
            "body": {
              "mode": "raw",
              "raw": "{\"content\":\"Updated comment.\"}",
              "options": { "raw": { "language": "json" } }
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Health",
      "item": [
        {
          "name": "Live",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/health/live"
          },
          "response": []
        },
        {
          "name": "Ready",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/health/ready"
          },
          "response": []
        },
        {
          "name": "Metrics",
          "request": {
            "method": "GET",
            "url": "{{base_url}}/metrics"
          },
          "response": []
        }
      ]
    }
  ],
  "variable": [
    { "key": "base_url", "value": "http://localhost:8000" },
    { "key": "access_token", "value": "" },
    { "key": "refresh_token", "value": "" },
    { "key": "project_id", "value": "" },
    { "key": "issue_id", "value": "" },
    { "key": "comment_id", "value": "" },
    { "key": "assignee_id", "value": "" }
  ]
}
